<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Page 154</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<BODY bgcolor="#FFFFFF" vlink="blue" link="blue" >
<p style="position:absolute;top:0px;left:0px"><img src="images/azure-cognitive-services-openai0154.png" width="892px" height="1252px">
</img></p>
<p style="position:absolute;top:44px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h696w_h24w_h;letter-spacing:0.31437px;">Assigning&nbsp;yourself&nbsp;to&nbsp;the&nbsp;Cognitive&nbsp;Services&nbsp;User&nbsp;role&nbsp;will&nbsp;allow&nbsp;you&nbsp;to&nbsp;use&nbsp;your&nbsp;account</span></p>
<p style="position:absolute;top:73px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h411w_h24w_h;letter-spacing:0.35394px;">for&nbsp;access&nbsp;to&nbsp;the&nbsp;specific&nbsp;cognitive&nbsp;services&nbsp;resource</span></p>
<p style="position:absolute;top:119px;left:121px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h223w_h24w_h;letter-spacing:0.36308px;">1.&nbsp;Get&nbsp;your&nbsp;user&nbsp;information</span></p>
<p style="position:absolute;top:173px;left:158px"><span style="virtical-align:top;font-size:12px;font-family:AAAAAC+SegoeUI;color:#161616;w_h60w_h19w_h;letter-spacing:0.53532px;">Azure&nbsp;CLI</span></p>
<p style="position:absolute;top:281px;left:121px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h402w_h24w_h;letter-spacing:0.33470px;">2.&nbsp;Assign&nbsp;yourself&nbsp;to&nbsp;“Cognitive&nbsp;Services&nbsp;User”&nbsp;role.</span></p>
<p style="position:absolute;top:334px;left:158px"><span style="virtical-align:top;font-size:12px;font-family:AAAAAC+SegoeUI;color:#161616;w_h60w_h19w_h;letter-spacing:0.53532px;">Azure&nbsp;CLI</span></p>
<p style="position:absolute;top:638px;left:121px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h650w_h24w_h;letter-spacing:0.32480px;">3.&nbsp;Acquire&nbsp;an&nbsp;Azure&nbsp;AD&nbsp;access&nbsp;token.&nbsp;Access&nbsp;tokens&nbsp;expire&nbsp;in&nbsp;one&nbsp;hour.&nbsp;you'll&nbsp;then</span></p>
<p style="position:absolute;top:667px;left:139px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h230w_h24w_h;letter-spacing:0.37527px;">need&nbsp;to&nbsp;acquire&nbsp;another&nbsp;one.</span></p>
<p style="position:absolute;top:721px;left:158px"><span style="virtical-align:top;font-size:12px;font-family:AAAAAC+SegoeUI;color:#161616;w_h60w_h19w_h;letter-spacing:0.53532px;">Azure&nbsp;CLI</span></p>
<p style="position:absolute;top:851px;left:121px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h637w_h24w_h;letter-spacing:0.29869px;">4.&nbsp;Make&nbsp;an&nbsp;API&nbsp;call&nbsp;Use&nbsp;the&nbsp;access&nbsp;token&nbsp;to&nbsp;authorize&nbsp;your&nbsp;API&nbsp;call&nbsp;by&nbsp;setting&nbsp;the</span></p>
<p style="position:absolute;top:884px;left:141px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#161616;w_h109w_h18w_h;letter-spacing:0.93201px;">Authorization</span></p>
<p style="position:absolute;top:879px;left:258px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h106w_h24w_h;letter-spacing:0.49500px;">header&nbsp;value.</span></p>
<p style="position:absolute;top:934px;left:158px"><span style="virtical-align:top;font-size:12px;font-family:AAAAAC+SegoeUI;color:#161616;w_h30w_h19w_h;letter-spacing:1.59860px;">Bash</span></p>
<p style="position:absolute;top:220px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#006881;w_h494w_h18w_h;letter-spacing:0.46270px;">export&nbsp;user=$(az&nbsp;account&nbsp;show&nbsp;-o&nbsp;json&nbsp;|&nbsp;jq&nbsp;-r&nbsp;.user.name)</span></p>
<p style="position:absolute;top:381px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#161616;w_h606w_h18w_h;letter-spacing:0.50285px;">export&nbsp;resourceId=$(az&nbsp;group&nbsp;show&nbsp;-g&nbsp;$myResourceGroupName&nbsp;-o&nbsp;json&nbsp;|&nbsp;jq</span></p>
<p style="position:absolute;top:402px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#006881;w_h61w_h18w_h;letter-spacing:0.56823px;">-r&nbsp;.id)</span></p>
<p style="position:absolute;top:424px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h597w_h18w_h;letter-spacing:0.47873px;">az&nbsp;role&nbsp;assignment&nbsp;create&nbsp;--role&nbsp;&quot;Cognitive&nbsp;Services&nbsp;User&quot;&nbsp;--assignee</span></p>
<p style="position:absolute;top:445px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#006881;w_h216w_h18w_h;letter-spacing:0.61493px;">$user&nbsp;--scope&nbsp;$resourceId</span></p>
<p style="position:absolute;top:529px;left:158px"><span style="virtical-align:top;font-size:16px;font-family:DAAAAA+docons;color:#3b2e58;w_h18w_h20w_h;letter-spacing:0.00000px;">７</span></p>
<p style="position:absolute;top:525px;left:181px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAB+SegoeUI-Semibold;color:#3b2e58;font-weight:bold;w_h41w_h24w_h;letter-spacing:1.51941px;">Note</span></p>
<p style="position:absolute;top:573px;left:158px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h498w_h24w_h;letter-spacing:0.35928px;">Role&nbsp;assignment&nbsp;change&nbsp;will&nbsp;take&nbsp;~5&nbsp;mins&nbsp;to&nbsp;become&nbsp;effective.</span></p>
<p style="position:absolute;top:768px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#006881;w_h511w_h18w_h;letter-spacing:0.62201px;">export&nbsp;accessToken=$(az&nbsp;account&nbsp;get-access-token&nbsp;--resource</span></p>
<p style="position:absolute;top:789px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#006881;w_h563w_h18w_h;letter-spacing:0.56737px;">https://cognitiveservices.azure.com&nbsp;-o&nbsp;json&nbsp;|&nbsp;jq&nbsp;-r&nbsp;.accessToken)</span></p>
<p style="position:absolute;top:982px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#161616;w_h615w_h18w_h;letter-spacing:0.77890px;">curl&nbsp;${endpoint%/}/openai/deployments/YOUR_DEPLOYMENT_NAME/completions?</span></p>
<p style="position:absolute;top:1003px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#161616;w_h208w_h18w_h;letter-spacing:0.72162px;">api-version=2022-12-01&nbsp;\</span></p>
<p style="position:absolute;top:1024px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h320w_h18w_h;letter-spacing:0.50060px;">-H&nbsp;&quot;Content-Type:&nbsp;application/json&quot;&nbsp;\</span></p>
<p style="position:absolute;top:1046px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h355w_h18w_h;letter-spacing:0.48233px;">-H&nbsp;&quot;Authorization:&nbsp;Bearer&nbsp;$accessToken&quot;&nbsp;\</span></p>
<p style="position:absolute;top:1067px;left:159px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h320w_h18w_h;letter-spacing:0.33373px;">-d&nbsp;'{&nbsp;&quot;prompt&quot;:&nbsp;&quot;Once&nbsp;upon&nbsp;a&nbsp;time&quot;&nbsp;}'</span></p>
<p style="position:absolute;top:1143px;left:96px"><span style="virtical-align:top;font-size:30px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h577w_h43w_h;letter-spacing:0.40645px;">Authorize&nbsp;access&nbsp;to&nbsp;managed&nbsp;identities</span></p>
</BODY>
</HTML>
