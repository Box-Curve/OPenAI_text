<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Page 173</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<BODY bgcolor="#FFFFFF" vlink="blue" link="blue" >
<p style="position:absolute;top:0px;left:0px"><img src="images/azure-cognitive-services-openai0173.png" width="892px" height="1252px">
</img></p>
<p style="position:absolute;top:215px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h701w_h24w_h;letter-spacing:0.36261px;">Your&nbsp;output&nbsp;should&nbsp;look&nbsp;something&nbsp;like&nbsp;the&nbsp;following&nbsp;example;&nbsp;note&nbsp;that&nbsp;the&nbsp;completion</span></p>
<p style="position:absolute;top:244px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h104w_h24w_h;letter-spacing:0.35470px;">text&nbsp;can&nbsp;vary.</span></p>
<p style="position:absolute;top:301px;left:106px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h54w_h21w_h;letter-spacing:1.25901px;">prompt</span></p>
<p style="position:absolute;top:301px;left:257px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h35w_h21w_h;letter-spacing:1.09757px;">error</span></p>
<p style="position:absolute;top:301px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h28w_h21w_h;letter-spacing:1.29127px;">text</span></p>
<p style="position:absolute;top:343px;left:106px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h120w_h21w_h;letter-spacing:0.38674px;">Hello&nbsp;my&nbsp;name&nbsp;is</span></p>
<p style="position:absolute;top:343px;left:257px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h404w_h21w_h;letter-spacing:0.38657px;">undefined&nbsp;Makaveli&nbsp;I'm&nbsp;eighteen&nbsp;years&nbsp;old&nbsp;and&nbsp;I&nbsp;want&nbsp;to</span></p>
<p style="position:absolute;top:367px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h417w_h21w_h;letter-spacing:0.33706px;">be&nbsp;a&nbsp;rapper&nbsp;when&nbsp;I&nbsp;grow&nbsp;up&nbsp;I&nbsp;love&nbsp;writing&nbsp;and&nbsp;making&nbsp;music</span></p>
<p style="position:absolute;top:391px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h87w_h21w_h;letter-spacing:0.40562px;">I'm&nbsp;from&nbsp;Los</span></p>
<p style="position:absolute;top:414px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h83w_h21w_h;letter-spacing:0.55551px;">Angeles,&nbsp;CA</span></p>
<p style="position:absolute;top:457px;left:106px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h112w_h21w_h;letter-spacing:0.36327px;">The&nbsp;best&nbsp;code&nbsp;is</span></p>
<p style="position:absolute;top:481px;left:106px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h76w_h21w_h;letter-spacing:0.51050px;">code&nbsp;that's</span></p>
<p style="position:absolute;top:457px;left:257px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h407w_h21w_h;letter-spacing:0.45443px;">undefined&nbsp;understandable&nbsp;This&nbsp;is&nbsp;a&nbsp;subjective&nbsp;statement,</span></p>
<p style="position:absolute;top:481px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h229w_h21w_h;letter-spacing:0.37606px;">and&nbsp;there&nbsp;is&nbsp;no&nbsp;definitive&nbsp;answer.</span></p>
<p style="position:absolute;top:523px;left:106px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h93w_h21w_h;letter-spacing:0.58125px;">SynapseML&nbsp;is</span></p>
<p style="position:absolute;top:523px;left:257px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h485w_h21w_h;letter-spacing:0.37917px;">undefined&nbsp;A&nbsp;machine&nbsp;learning&nbsp;algorithm&nbsp;that&nbsp;is&nbsp;able&nbsp;to&nbsp;learn&nbsp;how&nbsp;to</span></p>
<p style="position:absolute;top:547px;left:346px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h259w_h21w_h;letter-spacing:0.40444px;">predict&nbsp;the&nbsp;future&nbsp;outcome&nbsp;of&nbsp;events.</span></p>
<p style="position:absolute;top:748px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h653w_h24w_h;letter-spacing:0.34223px;">The&nbsp;example&nbsp;above&nbsp;makes&nbsp;several&nbsp;requests&nbsp;to&nbsp;the&nbsp;service,&nbsp;one&nbsp;for&nbsp;each&nbsp;prompt.&nbsp;To</span></p>
<p style="position:absolute;top:777px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h598w_h24w_h;letter-spacing:0.33475px;">complete&nbsp;multiple&nbsp;prompts&nbsp;in&nbsp;a&nbsp;single&nbsp;request,&nbsp;use&nbsp;batch&nbsp;mode.&nbsp;First,&nbsp;in&nbsp;the</span></p>
<p style="position:absolute;top:811px;left:98px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h135w_h18w_h;letter-spacing:0.90129px;">OpenAICompletion</span></p>
<p style="position:absolute;top:806px;left:240px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h518w_h24w_h;letter-spacing:0.32916px;">object,&nbsp;instead&nbsp;of&nbsp;setting&nbsp;the&nbsp;Prompt&nbsp;column&nbsp;to&nbsp;&quot;Prompt&quot;,&nbsp;specify</span></p>
<p style="position:absolute;top:837px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h683w_h24w_h;letter-spacing:0.31405px;">&quot;batchPrompt&quot;&nbsp;for&nbsp;the&nbsp;BatchPrompt&nbsp;column.&nbsp;To&nbsp;do&nbsp;so,&nbsp;create&nbsp;a&nbsp;dataframe&nbsp;with&nbsp;a&nbsp;list&nbsp;of</span></p>
<p style="position:absolute;top:865px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h137w_h24w_h;letter-spacing:0.42825px;">prompts&nbsp;per&nbsp;row.</span></p>
<p style="position:absolute;top:1079px;left:115px"><span style="virtical-align:top;font-size:12px;font-family:AAAAAC+SegoeUI;color:#161616;w_h45w_h19w_h;letter-spacing:1.19594px;">Python</span></p>
<p style="position:absolute;top:47px;left:116px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#0101fd;w_h320w_h18w_h;letter-spacing:0.60069px;">from&nbsp;pyspark.sql.functions&nbsp;import&nbsp;col</span></p>
<p style="position:absolute;top:89px;left:116px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h407w_h18w_h;letter-spacing:0.69374px;">completed_df&nbsp;=&nbsp;completion.transform(df).cache()</span></p>
<p style="position:absolute;top:111px;left:116px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h242w_h18w_h;letter-spacing:0.00000px;">display(completed_df.select(</span></p>
<p style="position:absolute;top:132px;left:134px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h242w_h18w_h;letter-spacing:0.44566px;">col(&quot;prompt&quot;),&nbsp;col(&quot;error&quot;),</span></p>
<p style="position:absolute;top:154px;left:116px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h502w_h18w_h;letter-spacing:0.61950px;">col(&quot;completions.choices.text&quot;).getItem(0).alias(&quot;text&quot;)))</span></p>
<p style="position:absolute;top:614px;left:96px"><span style="virtical-align:top;font-size:30px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h327w_h43w_h;letter-spacing:0.46154px;">Other&nbsp;usage&nbsp;examples</span></p>
<p style="position:absolute;top:690px;left:96px"><span style="virtical-align:top;font-size:24px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h519w_h36w_h;letter-spacing:0.44736px;">Improve&nbsp;throughput&nbsp;with&nbsp;request&nbsp;batching</span></p>
<p style="position:absolute;top:935px;left:115px"><span style="virtical-align:top;font-size:16px;font-family:DAAAAA+docons;color:#3b2e58;w_h18w_h20w_h;letter-spacing:0.00000px;">ï¼—</span></p>
<p style="position:absolute;top:932px;left:138px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAB+SegoeUI-Semibold;color:#3b2e58;font-weight:bold;w_h41w_h24w_h;letter-spacing:1.51941px;">Note</span></p>
<p style="position:absolute;top:978px;left:115px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h611w_h24w_h;letter-spacing:0.28987px;">There&nbsp;is&nbsp;currently&nbsp;a&nbsp;limit&nbsp;of&nbsp;20&nbsp;prompts&nbsp;in&nbsp;a&nbsp;single&nbsp;request&nbsp;and&nbsp;a&nbsp;limit&nbsp;of&nbsp;2048</span></p>
<p style="position:absolute;top:1007px;left:115px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h311w_h24w_h;letter-spacing:0.35356px;">&quot;tokens&quot;,&nbsp;or&nbsp;approximately&nbsp;1500&nbsp;words.</span></p>
<p style="position:absolute;top:1127px;left:116px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h286w_h18w_h;letter-spacing:0.65342px;">batch_df&nbsp;=&nbsp;spark.createDataFrame(</span></p>
<p style="position:absolute;top:1148px;left:151px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAC+SegoeUI;color:#161616;w_h9w_h18w_h;letter-spacing:0.00000px;">[</span></p>
<p style="position:absolute;top:1169px;left:186px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h589w_h18w_h;letter-spacing:0.36554px;">([&quot;The&nbsp;time&nbsp;has&nbsp;come&quot;,&nbsp;&quot;Pleased&nbsp;to&quot;,&nbsp;&quot;Today&nbsp;stocks&quot;,&nbsp;&quot;Here's&nbsp;to&quot;],),</span></p>
<p style="position:absolute;top:1191px;left:186px"><span style="virtical-align:top;font-size:13px;font-family:AAAAAE+Consolas;color:#a31515;w_h537w_h18w_h;letter-spacing:0.34709px;">([&quot;The&nbsp;only&nbsp;thing&quot;,&nbsp;&quot;Ask&nbsp;not&nbsp;what&quot;,&nbsp;&quot;Every&nbsp;litter&quot;,&nbsp;&quot;I&nbsp;am&quot;],),</span></p>
</BODY>
</HTML>
