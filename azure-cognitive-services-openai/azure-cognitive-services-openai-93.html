<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Page 93</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<BODY bgcolor="#FFFFFF" vlink="blue" link="blue" >
<p style="position:absolute;top:0px;left:0px"><img src="images/azure-cognitive-services-openai0093.png" width="892px" height="1252px">
</img></p>
<p style="position:absolute;top:44px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h702w_h24w_h;letter-spacing:0.33532px;">In&nbsp;this&nbsp;example&nbsp;once&nbsp;the&nbsp;token&nbsp;count&nbsp;is&nbsp;reached&nbsp;the&nbsp;oldest&nbsp;messages&nbsp;in&nbsp;the&nbsp;conversation</span></p>
<p style="position:absolute;top:73px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h673w_h24w_h;letter-spacing:0.31329px;">transcript&nbsp;will&nbsp;be&nbsp;removed.&nbsp;del&nbsp;is&nbsp;used&nbsp;instead&nbsp;of&nbsp;pop()&nbsp;for&nbsp;efficiency,&nbsp;and&nbsp;we&nbsp;start&nbsp;at</span></p>
<p style="position:absolute;top:104px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h670w_h24w_h;letter-spacing:0.34651px;">index&nbsp;1&nbsp;so&nbsp;as&nbsp;to&nbsp;always&nbsp;preserve&nbsp;the&nbsp;system&nbsp;message&nbsp;and&nbsp;only&nbsp;remove&nbsp;user/assistant</span></p>
<p style="position:absolute;top:133px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h624w_h24w_h;letter-spacing:0.36559px;">messages.&nbsp;Over&nbsp;time,&nbsp;this&nbsp;method&nbsp;of&nbsp;managing&nbsp;the&nbsp;conversation&nbsp;can&nbsp;cause&nbsp;the</span></p>
<p style="position:absolute;top:161px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h676w_h24w_h;letter-spacing:0.33798px;">conversation&nbsp;quality&nbsp;to&nbsp;degrade&nbsp;as&nbsp;the&nbsp;model&nbsp;will&nbsp;gradually&nbsp;lose&nbsp;context&nbsp;of&nbsp;the&nbsp;earlier</span></p>
<p style="position:absolute;top:190px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h228w_h24w_h;letter-spacing:0.40736px;">portions&nbsp;of&nbsp;the&nbsp;conversation.</span></p>
<p style="position:absolute;top:237px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h695w_h24w_h;letter-spacing:0.33394px;">An&nbsp;alternative&nbsp;approach&nbsp;is&nbsp;to&nbsp;limit&nbsp;the&nbsp;conversation&nbsp;duration&nbsp;to&nbsp;the&nbsp;max&nbsp;token&nbsp;length&nbsp;or</span></p>
<p style="position:absolute;top:266px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h670w_h24w_h;letter-spacing:0.32399px;">a&nbsp;certain&nbsp;number&nbsp;of&nbsp;turns.&nbsp;Once&nbsp;the&nbsp;max&nbsp;token&nbsp;limit&nbsp;is&nbsp;reached&nbsp;and&nbsp;the&nbsp;model&nbsp;would</span></p>
<p style="position:absolute;top:295px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h693w_h24w_h;letter-spacing:0.32493px;">lose&nbsp;context&nbsp;if&nbsp;you&nbsp;were&nbsp;to&nbsp;allow&nbsp;the&nbsp;conversation&nbsp;to&nbsp;continue,&nbsp;you&nbsp;can&nbsp;prompt&nbsp;the&nbsp;user</span></p>
<p style="position:absolute;top:323px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h655w_h24w_h;letter-spacing:0.31701px;">that&nbsp;they&nbsp;need&nbsp;to&nbsp;begin&nbsp;a&nbsp;new&nbsp;conversation&nbsp;and&nbsp;clear&nbsp;the&nbsp;messages&nbsp;array&nbsp;to&nbsp;start&nbsp;a</span></p>
<p style="position:absolute;top:352px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h457w_h24w_h;letter-spacing:0.35335px;">brand&nbsp;new&nbsp;conversation&nbsp;with&nbsp;the&nbsp;full&nbsp;token&nbsp;limit&nbsp;available.</span></p>
<p style="position:absolute;top:399px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#161616;w_h694w_h24w_h;letter-spacing:0.35911px;">The&nbsp;token&nbsp;counting&nbsp;portion&nbsp;of&nbsp;the&nbsp;code&nbsp;demonstrated&nbsp;previously,&nbsp;is&nbsp;a&nbsp;simplified&nbsp;version</span></p>
<p style="position:absolute;top:428px;left:96px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h334w_h24w_h;letter-spacing:0.37987px;">of&nbsp;one&nbsp;of&nbsp;<a href="https://github.com/openai/openai-cookbook/blob/main/examples/How_to_format_inputs_to_ChatGPT_models.ipynb"style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h0w_h0w_h;letter-spacing:0.00000px;">OpenAI's&nbsp;cookbook&nbsp;examples&nbsp;.</a></span></p>
<p style="position:absolute;top:552px;left:139px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h261w_h24w_h;letter-spacing:0.40806px;"><a href="azure-cognitive-services-openai-3.html"style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h0w_h0w_h;letter-spacing:0.00000px;">Learn&nbsp;more&nbsp;about&nbsp;Azure&nbsp;OpenAI</a>.</span></p>
<p style="position:absolute;top:582px;left:139px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h515w_h24w_h;letter-spacing:0.36445px;">Get&nbsp;started&nbsp;with&nbsp;the&nbsp;ChatGPT&nbsp;model&nbsp;with&nbsp;<a href="azure-cognitive-services-openai-34.html"style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h0w_h0w_h;letter-spacing:0.00000px;">the&nbsp;ChatGPT&nbsp;quickstart.</a></span></p>
<p style="position:absolute;top:610px;left:139px"><span style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h601w_h24w_h;letter-spacing:0.37897px;">For&nbsp;more&nbsp;examples,&nbsp;check&nbsp;out&nbsp;the&nbsp;<a href="https://aka.ms/AOAICodeSamples"style="virtical-align:top;font-size:16px;font-family:AAAAAC+SegoeUI;color:#0065b3;w_h0w_h0w_h;letter-spacing:0.00000px;">Azure&nbsp;OpenAI&nbsp;Samples&nbsp;GitHub&nbsp;repository</a></span></p>
<p style="position:absolute;top:490px;left:96px"><span style="virtical-align:top;font-size:30px;font-family:AAAAAB+SegoeUI-Semibold;color:#161616;font-weight:bold;w_h155w_h43w_h;letter-spacing:0.47178px;">Next&nbsp;steps</span></p>
</BODY>
</HTML>
